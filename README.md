# xshady

This repo contains some projects that demonstrate the precense of vulnerabilities in libraries that use shading. The focus is on libraries not using the [shade plugin](https://maven.apache.org/plugins/maven-shade-plugin/) or similar, i.e. project that do not have meta data that allow dependency scanners to detect those vulnerabilities. Results are discovered with a toolchain we are building, aiming at discovering blindspots in existing SCA tools. 

## Repository Structure

The top level folders have names corresponding to the (slightly modified to make it a valid file name) Maven coordinates of a vulnerable component that is being shaded. 

This subfolders then have a subfolder with the same name, containing a maven project with test(s) illustrating a vulnerability. Dependeabot and similar tools will detect those vulnerabilities as expected.

Other subfolders contain projects where the vulnerable library is shaded (or sometimes just copied, i.e. without renaming packages), plus tests to illustrate the respective vulnerability. The intersting part is that existing security scanners do not pick this up. 



## Running Software Composition Security Analyses

The projects can be used to test various SCA tools as follows: 

### Dependabot 

The analysis is run on GitHub, check the dependabopt [result page](https://github.com/jensdietrich/xshady/security/dependabot) for the projects detected as being vulnerable.


### OWASP Dependency Check

To run the check via the CLI, follow [instructions](https://jeremylong.github.io/DependencyCheck/dependency-check-cli/index.html) to install the tool, the run the following command from a terminal after CDiing into the project folder:

`dependency-check -scan . -f CSV`

Scan results are committed to the repo, the reports are generated by running

`dependency-check -scan . -f JSON -o scan-results/dependency-check -prettyPrint`

and are available in `<project>/scan-results-dependency-check/`


### Snyk

Follow the [instructions](https://docs.snyk.io/snyk-cli) to install snyk, then run `snyk auth` before using it for the first time. 

After succesful authentication, run `snyk test` in each project folder. 
  
### IntelliJ IDEA 2022.2 (Ultimate Edition) / CheckMarx

IntelliJ has built-in support to detect vulnerable dependencies. To run this analysis requires to load the respective projects into the IDE. Then click on the project's `pom.xml`, and run `Analyze > Show Vulnerable Dependencies`. This will display a view with vulnerable dependencies. 

This functionality is based on [checkmarx](https://checkmarx.com/).   


 

 

